@page
@model Elderson.Pages.Users.CreateUserModel
@{
    Layout = "Shared/_LayoutITSupport";
    ViewData["Title"] = "Create user page";
    ViewData["Header"] = "CREATE USER";
    ViewData["Breadcrumb"] = "User Management > Users";
}

<style>
    .doctorForm, .adminForm, .patientForm, .clinicForm {
        display: none;
    }

    .clinicChoice {
        display:none;
    }

    .clinicBtn {
        border:none;
        background-color:darkgrey;
    }
</style>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>

<div class="row">
    <form class="forms-sample" enctype="multipart/form-data" method="post" asp-action="">
        <div class="row">
            <div class="col-12 grid-margin stretch-card">
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">Login Information</h4>
                        <hr />
                        <div class="form-group d-flex">
                            <div style="width:30%;">
                                <label for="exampleInputEmail3">Email address</label>

                            </div>
                            <div style="width:70%;">
                                <input asp-for="newUser.Email" type="email" class="form-control" id="exampleInputEmail3" placeholder="EMAIL">
                                <span asp-validation-for="newUser.Email" class="text-danger"></span>
                            </div>

                        </div>
                        <div class="form-group d-flex">
                            <div style="width:30%;">
                                <label for="password">Password</label>

                            </div>
                            <div style="width:70%;">
                                <input asp-for="viewModel.pwd" type="password" class="form-control" id="password" placeholder="PASSWORD">
                                <span asp-validation-for="viewModel.pwd" class="text-danger"></span>
                            </div>

                        </div>
                        <div class="form-group d-flex">
                            <div style="width:30%;">
                                <label for="confirmPassword">Confirm Password</label>

                            </div>
                            <div style="width:70%;">
                                <input asp-for="viewModel.confirmPwd" type="password" class="form-control" id="confirmPassword" placeholder="CONFIRM PASSWORD">
                                <span asp-validation-for="viewModel.confirmPwd" class="text-danger"></span>
                            </div>

                        </div>


                    </div>
                </div>
            </div>



        </div>
        <div class="row">
            <div class="col-12 grid-margin stretch-card">
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">Other Information</h4>
                        <hr />
                        <div class="form-group  d-flex">
                            <div style="width:30%;">
                                <label for="exampleInputName1">Name</label>

                            </div>
                            <div style="width:70%;">
                                <input asp-for="newUser.Fullname" type="text" class="form-control" id="exampleInputName1" placeholder="NAME">
                                <span asp-validation-for="newUser.Fullname" class="text-danger"></span>
                            </div>

                        </div>
                        <div class="form-group d-flex">
                            <div style="width:30%;">
                                <label for="exampleInputEmail3">Birth Date</label>

                            </div>
                            <div style="width:70%;">
                                <input asp-for="newUser.Birthdate" type="date" class="form-control" id="exampleInputEmail3" placeholder="BIRTHDATE">
                                <span asp-validation-for="newUser.Birthdate" class="text-danger"></span>
                            </div>

                        </div>
                        <div class="form-group d-flex">
                            <div style="width:30%;">
                                <label for="exampleInputEmail3">Phone</label>

                            </div>
                            <div style="width:70%;height:28px;">
                                <div class="d-flex justify-content-between">
                                    <div class="form-group" style="width:20%;">
                                        <input type="text" class="form-control" id="code" asp-for="newUser.CountryCode" value="65">
                                    </div>
                                    <div class="form-group" style="width:76%;">
                                        <input type="text" class="form-control" id="EmergencyPhone" asp-for="newUser.Phone" placeholder="PHONE NUMBER">
                                    </div>
                                </div>
                                <span asp-validation-for="newUser.Phone" class="text-danger"></span>
                            </div>

                        </div>
                        <div class="form-group d-flex">
                            <div style="width:30%;">
                                <label for="exampleSelectGender">Gender</label>

                            </div>
                            <div style="width:70%;">
                                @*<select class="form-control" id="exampleSelectGender">
                                    <option>Male</option>
                                    <option>Female</option>
                                </select>*@
                                @Html.RadioButton("newUser.Gender", "Male", new { style = "margin-right:10px;" }) <span>Male</span>
                                @Html.RadioButton("newUser.Gender", "Female", new { style = "margin:0 10px;" }) <span>Female</span>
                                <span asp-validation-for="newUser.Gender" class="text-danger"></span>
                            </div>

                        </div>
                        <div class="form-group  d-flex">
                            <div style="width:30%;">
                                <label>Select User Type</label>

                            </div>
                            <div style="width:70%;">
                                @*<select class="js-example-basic-single w-100">
                                    <option value="Patient">Patient</option>
                                    <option value="Doctor">Doctor</option>
                                    <option value="Administator">Administrator</option>
                                    <option value="IT Support">IT Support</option>
                                    <option value="Pharmacist">Pharmacist</option>
                                </select>*@
                                @Html.DropDownList("newUser.UserType", new SelectList(Enum.GetValues(typeof(Models.UserType))), "--Select an option--", new { @class = "form-control userType", @id = "userType" })
                                <span asp-validation-for="newUser.UserType" class="text-danger"></span>
                            </div>

                        </div>
                        @*<div class="form-group">
                            <label for="exampleInputBirthDate">Birth Date</label>
                            <input asp-for="newUser.BirthDate" type="number" class="form-control" id="exampleInputBirthDate" placeholder="Birth Date">
                            <span asp-validation-for="newUser.BirthDate" class="text-danger"></span>
                        </div>*@



                    </div>
                </div>
            </div>
        </div>

        <div class="row doctorForm">
            <div class="col-12 grid-margin stretch-card">
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">Doctor Related Information</h4>
                        <hr />
                        <div class="form-group  d-flex">
                            <div style="width:30%;">
                                <label>Select Relationship</label>

                            </div>
                            <div style="width:70%;">
                                @Html.DropDownList("DoctorRole.Language", new SelectList(Enum.GetValues(typeof(Models.LanguageType))), "--Select language--", new { @class = "form-control" })
                                <span asp-validation-for="DoctorRole.Language" class="text-danger"></span>
                            </div>

                        </div>
                        <div class="form-group  d-flex">
                            <div style="width:30%;">
                                <label for="workExp">Work Experience (In Year)</label>

                            </div>
                            <div style="width:70%;">
                                
                                <input asp-for="DoctorRole.WorkExp" type="text" class="form-control" id="workExp" placeholder="WORK EXPERIENCE">
                                <span asp-validation-for="DoctorRole.WorkExp" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="form-group  d-flex">
                            <div style="width:30%;">
                                <label for="photo">Profile Photo</label>

                            </div>
                            <div style="width:70%;" class="d-flex">
                                <img id="profilePhoto" alt="Image" width="100" height="100" style="border:1px solid grey; margin-right:10px;"/>
                                <input asp-for="DoctorRole.Photo" onchange="document.getElementById('profilePhoto').src = window.URL.createObjectURL(this.files[0])" type="file" class="form-control" id="photo" placeholder="Profile Photo">
                                <span asp-validation-for="DoctorRole.Photo" class="text-danger"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row patientForm">
            <div class="col-12 grid-margin stretch-card">
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">Patient Related Information</h4>
                        <hr />
                        <div class="form-group  d-flex">
                            <div style="width:30%;">
                                <label for="nric">Nric</label>

                            </div>
                            <div style="width:70%;">
                                <input asp-for="PatientRole.Nric" type="text" class="form-control" id="nric" placeholder="NRIC">
                                <span asp-validation-for="PatientRole.Nric" class="text-danger"></span>
                            </div>

                        </div>

                        <div class="form-group  d-flex">
                            <div style="width:30%;">
                                <label>Select Relationship</label>

                            </div>
                            <div style="width:70%;">
                                @Html.DropDownList("PatientRole.Relationship", new SelectList(Enum.GetValues(typeof(Models.RelationshipType))), "--Select Marital Status--", new { @class = "form-control" })
                                <span asp-validation-for="PatientRole.Relationship" class="text-danger"></span>
                            </div>

                        </div>
                        <div class="form-group d-flex">
                            <div style="width:30%;">
                                <label for="emergencyName">Emergency Name</label>

                            </div>
                            <div style="width:70%;">
                                <input asp-for="PatientRole.EmergencyName" type="text" class="form-control" id="emergencyName" placeholder="EMERGENCY NAME">
                                <span asp-validation-for="PatientRole.EmergencyName" class="text-danger"></span>
                            </div>

                        </div>

                        <div class="form-group d-flex">
                            <div style="width:30%;">
                                <label for="emergencyNumber">Emergency Number</label>

                            </div>
                            <div style="width:70%;height:28px;">
                                <div class="d-flex justify-content-between">
                                    <div class="form-group" style="width:20%;">
                                        <input type="text" class="form-control" id="code" asp-for="PatientRole.CountryCode" value="65">
                                    </div>
                                    <div class="form-group" style="width:76%;">
                                        <input type="text" class="form-control" asp-for="PatientRole.EmergencyNum" id="emergencyNumber" placeholder="EMERGENCY NUMBER">
                                    </div>
                                </div>
                                <span asp-validation-for="PatientRole.EmergencyNum" class="text-danger"></span>
                            </div>

                        </div>
                        <div class="form-group d-flex">
                            <div style="width:30%;">
                                <label for="homeAddress">Home Address</label>

                            </div>
                            <div style="width:70%;">
                                <textarea asp-for="PatientRole.HomeAddr" class="form-control" id="homeAddress" placeholder="HOME ADDRESS"></textarea>
                                <span asp-validation-for="PatientRole.HomeAddr" class="text-danger"></span>
                            </div>

                        </div>

                    </div>
                </div>
            </div>
        </div>
        <div class="row adminForm">
            <div class="col-12 grid-margin stretch-card">
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">Administrator Related Information</h4>
                        <hr />
                        <div class="form-group  d-flex">
                            <div style="width:30%;">
                                <label for="clinic">Clinic</label>

                            </div>
                            <div style="width:70%;">
                                <input asp-for="AdminRole.Clinic" type="text" class="form-control" id="nric" placeholder="CLINIC">
                                <span asp-validation-for="AdminRole.Clinic" class="text-danger"></span>
                            </div>

                        </div>
                        <div class="form-group d-flex">
                            <div style="width:30%;">
                                <label for="openingHours">Opening Hours</label>

                            </div>
                            <div style="width:70%;">
                                <input asp-for="AdminRole.OpeningHours" type="time" value="00:00:00" class="form-control" id="openingHours" placeholder="OPENING HOURS">
                                <span asp-validation-for="AdminRole.OpeningHours" class="text-danger"></span>
                            </div>

                        </div>
                        <div class="form-group d-flex">
                            <div style="width:30%;">
                                <label for="closingHours">Closing Hours</label>

                            </div>
                            <div style="width:70%;">
                                <input asp-for="AdminRole.ClosingHours" type="time" value="00:00:00" class="form-control" id="closingHours" placeholder="CLOSING HOURS">
                                <span asp-validation-for="AdminRole.ClosingHours" class="text-danger"></span>
                            </div>

                        </div>

                    </div>
                </div>
            </div>
        </div>
        <div class="row clinicForm">
            <div class="col-12 grid-margin stretch-card">
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">Clinic Related Information</h4>
                        <hr />
                        <div class="form-group  d-flex">
                            <div style="width:30%;">
                                <label for="clinic">Clinic</label>

                            </div>
                            <div style="width: 70%; d-flex">
                                <button type="button" id="useExist" onclick="clinicChoice('useExist')" class="btn btn-primary me-2 clinicBtn">Use Existing Clinic</button>
                                <button type="button" id="useNew" onclick="clinicChoice('useNew')" class="btn btn-primary me-2 clinicBtn">Create New Clinic</button>
                            </div>
                        </div>
                        <div class="useExist clinicChoice">
                            <div class="form-group  d-flex">
                                <div style="width:30%;">
                                    <label>Choose Existing Clinic</label>

                                </div>
                                <div style="width:70%;">
                                    @Html.DropDownList("DoctorRole.ClinicId", Model.clinics as List<SelectListItem>, "--Select language--", new { @class = "form-control" })
                                    <span asp-validation-for="DoctorRole.ClinicId" class="text-danger"></span>
                                </div>

                            </div>
                        </div>
                        <div class="useNew clinicChoice">
                            <div class="form-group  d-flex">
                                <div style="width:30%;">
                                    <label for="clinic">Clinic Name</label>

                                </div>
                                <div style="width:70%;">
                                    <input asp-for="newClinic.Name" type="text" class="form-control" id="clinic" placeholder="CLINIC">
                                    <span asp-validation-for="newClinic.Name" class="text-danger"></span>
                                </div>
                            </div>
                            <div class="form-group  d-flex">
                                <div style="width:30%;">
                                    <label for="clinic">Address</label>

                                </div>
                                <div style="width:70%;">
                                    <textarea asp-for="newClinic.Address" rows="6" class="form-control" id="clinic"></textarea>
                                    <span asp-validation-for="newClinic.Address" class="text-danger"></span>
                                </div>


                            </div>
                            <div class="form-group  d-flex">
                                <div style="width:30%;">
                                    <label for="clinic">Clinic Phone</label>

                                </div>
                                <div style="width:70%;height:28px;">
                                    <div class="d-flex justify-content-between">
                                        <div class="form-group" style="width:20%;">
                                            <input type="text" class="form-control" id="code" asp-for="newClinic.CountryCode" value="65">
                                        </div>
                                        <div class="form-group" style="width:76%;">
                                            <input type="text" class="form-control" id="ClinicPhone" asp-for="newClinic.Phone" placeholder="PHONE NUMBER">
                                        </div>
                                    </div>
                                    <span asp-validation-for="newClinic.Phone" class="text-danger"></span>
                                </div>


                            </div>

                        </div>

                    </div>
                </div>
            </div>
        </div>

        <div class="d-flex justify-content-between">
            <button type="button" class="btn btn-primary me-2">Cancel</button>

            <button type="submit" class="btn btn-primary me-2">Submit</button>

        </div>

    </form>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}

<script>
    $("#userType").on("change", function () {
        if (document.getElementById("userType").value == "Patient") {
            $(".patientForm").show();

            $(".doctorForm").hide();
            $(".adminForm").hide();
            $(".clinicForm").hide();
        } else if (document.getElementById("userType").value == "Doctor") {
            $(".doctorForm").show();
            $(".clinicForm").show();
            clinicChoice("useNew")

            $(".patientForm").hide();
            $(".adminForm").hide();
        } else if (document.getElementById("userType").value == "Administrator") {
            $(".adminForm").show();
            $(".clinicForm").show();

            $(".patientForm").hide();
            $(".doctorForm").hide();
        } else {
            $(".adminForm").hide();
            $(".patientForm").hide();
            $(".doctorForm").hide();
            $(".clinicForm").hide();
        }
    });

    function clinicChoice(choice) {
        $(".clinicChoice").hide();
        $(`.${choice}`).show();
        $(".clinicBtn").css("background-color", "darkgrey");
        $(`#${choice}`).css("background-color", "#1F3BB3");
    }

</script>